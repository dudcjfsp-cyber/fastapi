# ğŸ§ª í…ŒìŠ¤íŠ¸ ì½”ë“œ ìê¸° ì‹¤ìŠµ ê°€ì´ë“œ

> ì´ í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§ì ‘ ì‘ì„±í•´ ë³´ê¸° ìœ„í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## 1. ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ (pytest)

### ì„¤ì¹˜
```bash
pip install pytest httpx
```

### ì‹œì‘ ì˜ˆì œ - `tests/test_root.py`
```python
from fastapi.testclient import TestClient
from main import app

client = TestClient(app)

def test_root():
    response = client.get("/")
    assert response.status_code == 200
    assert "ì•ˆë…•í•˜ì„¸ìš”" in response.json()["message"]
```

### ì‹¤í–‰ ë°©ë²•
```bash
pytest tests/ -v
```

### ë„ì „ ê³¼ì œ (ë‚œì´ë„ìˆœ)

| ë‚œì´ë„ | ê³¼ì œ | íŒíŠ¸ |
|--------|------|------|
| â­ | `GET /` ë£¨íŠ¸ ì‘ë‹µ í…ŒìŠ¤íŠ¸ | `client.get("/")` |
| â­â­ | `POST /auth/register` íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸ | `client.post("/auth/register", json={...})` |
| â­â­ | `POST /auth/token` ë¡œê·¸ì¸ í›„ í† í° ë°›ê¸° | `response.json()["access_token"]` í™•ì¸ |
| â­â­â­ | í† í° ì—†ì´ ë³´í˜¸ëœ API ì ‘ê·¼ â†’ 401 ì—ëŸ¬ í™•ì¸ | `assert response.status_code == 401` |
| â­â­â­â­ | ADMIN vs USER ê¶Œí•œ ì°¨ì´ í…ŒìŠ¤íŠ¸ | `headers={"Authorization": f"Bearer {token}"}` |

### ì°¸ê³ : í† í°ì„ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ íŒ¨í„´
```python
def test_protected_route():
    # 1. ë¨¼ì € ë¡œê·¸ì¸í•´ì„œ í† í° ë°›ê¸°
    login_data = {"username": "ideabong", "password": "1234"}
    response = client.post("/auth/token", data=login_data)
    token = response.json()["access_token"]

    # 2. í† í°ì„ í—¤ë”ì— ë„£ì–´ì„œ ë³´í˜¸ëœ API í˜¸ì¶œ
    headers = {"Authorization": f"Bearer {token}"}
    response = client.get("/some-protected-endpoint", headers=headers)
    assert response.status_code == 200
```

---

## 2. í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ (Vitest)

### ì„¤ì¹˜
```bash
cd ë¦¬ì•¡íŠ¸ì‹¤ìŠµ/ë¦¬ì•¡íŠ¸ì‹¤ìŠµ
npm install -D vitest @testing-library/react @testing-library/jest-dom jsdom
```

### ì„¤ì • - `vite.config.ts`ì— ì¶”ê°€
```typescript
/// <reference types="vitest" />
import { defineConfig } from 'vite'

export default defineConfig({
  // ... ê¸°ì¡´ ì„¤ì •
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/setupTests.ts',
  },
})
```

### ì„¤ì • íŒŒì¼ ìƒì„± - `src/setupTests.ts`
```typescript
import '@testing-library/jest-dom'
```

### ì‹œì‘ ì˜ˆì œ - `src/__tests__/HomePage.test.tsx`
```tsx
import { render, screen } from '@testing-library/react'
import { describe, it, expect } from 'vitest'
import HomePage from '../pages/HomePage'

describe('HomePage', () => {
  it('í˜ì´ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ë Œë”ë§ëœë‹¤', () => {
    render(<HomePage />)
    // í™”ë©´ì— íŠ¹ì • í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ í™•ì¸
    expect(screen.getByText(/ì–´ë–¤í…ìŠ¤íŠ¸/)).toBeInTheDocument()
  })
})
```

### ì‹¤í–‰ ë°©ë²•
```bash
npx vitest run
```

### ë„ì „ ê³¼ì œ

| ë‚œì´ë„ | ê³¼ì œ |
|--------|------|
| â­ | `HomePage`ê°€ ë Œë”ë§ë˜ëŠ”ì§€ í™•ì¸ |
| â­â­ | `LoginPage`ì˜ ì…ë ¥ í•„ë“œê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ |
| â­â­â­ | ë¡œê·¸ì¸ í¼ ì…ë ¥ â†’ ë²„íŠ¼ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ |

---

## ğŸ’¡ íŒ
- í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ ë³´í†µ `tests/` í´ë”ì— ëª¨ì•„ë‘ê±°ë‚˜, ì†ŒìŠ¤ íŒŒì¼ ì˜†ì— `*.test.py` / `*.test.tsx`ë¡œ ë§Œë“­ë‹ˆë‹¤.
- í•˜ë‚˜ì”© ì²œì²œíˆ ë„ì „í•´ ë³´ì„¸ìš”. ë§‰íˆë©´ ì–¸ì œë“  ì§ˆë¬¸í•˜ì„¸ìš”! ğŸš€
